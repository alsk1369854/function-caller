{"version":3,"file":"index.test.js","names":["fun","Error","describe","test","set","expect","getSize","toBe","clear","key","testFunc","a","b","expected","getFunction","toThrow","jest","fn","toBeCalledTimes","call","key1","testFunc1","key2","testFunc2","asyncCall","then","value","hasKey","toBeFalsy","toBeTruthy"],"sources":["../../src/function-caller/index.test.ts"],"sourcesContent":["import {\n    set,\n    clear,\n    getFunction,\n    getSize,\n    call,\n    asyncCall,\n    hasKey,\n} from './index'\nconst fun = () => {\n    throw new Error('a')\n}\n\ndescribe('function-caller', () => {\n    test('functionMap size', () => {\n        set('1', () => { });\n        expect(getSize()).toBe(1);\n        set('2', () => { });\n        expect(getSize()).toBe(2);\n        set('3', () => { });\n        expect(getSize()).toBe(3);\n        clear();\n        expect(getSize()).toBe(0);\n    });\n\n    test('setting successfully', () => {\n        const key = 'test key';\n        const testFunc = (a: number, b: number) => a + b;\n\n        set(key, testFunc);\n        const expected = getFunction(key) as Function;\n\n        expect(testFunc).toBe(expected);\n        clear();\n    });\n\n    test('Duplicate settings should throw an error', () => {\n        const key = 'test key';\n        const testFunc = (a: number, b: number) => a + b;\n\n        set(key, testFunc);\n        expect(() => set(key, testFunc)).toThrow('function-caller: Key \"test key\" is exists');\n\n        clear();\n    });\n\n    test('Simple Call Function', () => {\n        const key = 'test key';\n        const testFunc = jest.fn();\n\n        set(key, testFunc);\n        expect(testFunc).toBeCalledTimes(0);\n\n        call(key)\n        expect(testFunc).toBeCalledTimes(1);\n\n        call(key)\n        expect(testFunc).toBeCalledTimes(2);\n\n        clear();\n    });\n\n    test('Call Function with args', () => {\n        const key1 = 'test key1';\n        const testFunc1 = (a: number, b: number): number => a + b\n        set(key1, testFunc1);\n\n        const key2 = 'test key2';\n        const testFunc2 = (a: number, b: number): number => a - b\n        set(key2, testFunc2);\n\n        expect(call(key1, 2, 3)).toBe(5);\n        expect(call(key2, 2, 3)).toBe(-1);\n\n        clear();\n    });\n\n    test('Simple AsyncCall Function', () => {\n        const key = 'test key';\n        const testFunc = jest.fn();\n\n        set(key, testFunc);\n        expect(testFunc).toBeCalledTimes(0);\n\n        asyncCall(key).then(() => {\n            expect(testFunc).toBeCalledTimes(1);\n        })\n\n        clear();\n    })\n\n    test('AsyncCall Function with args', () => {\n        const key1 = 'test key1';\n        const testFunc1 = (a: number, b: number): number => a + b\n        set(key1, testFunc1);\n\n        const key2 = 'test key2';\n        const testFunc2 = (a: number, b: number): number => a - b\n        set(key2, testFunc2);\n\n        asyncCall(key1, 2, 3).then((value: any) => {\n            expect(value).toBe(5);\n        })\n\n        asyncCall(key2, 2, 3).then((value: any) => {\n            expect(value).toBe(-1);\n        })\n\n        clear();\n    });\n\n    test('hasKey', ()=>{\n        const key = 'test key';\n\n        expect(hasKey(key)).toBeFalsy()\n\n        set(key, ()=>{});\n        expect(hasKey(key)).toBeTruthy()\n\n        clear();\n    });\n\n})"],"mappings":"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"}